# π§  Medi-Mind

μλ£ μμ„± λ°μ΄ν„°λ¥Ό κΈ°λ°μΌλ΅ **AI μ¶”λ΅ μ„ μν–‰ν•λ” λ°±μ—”λ“ μ¤‘μ‹¬ μ„λΉ„μ¤**μ…λ‹λ‹¤.
FastAPI μ„λ²„μ—μ„ μμ„± νμΌ μ—…λ΅λ“ β†’ μ „μ²λ¦¬(ν¬λ§· λ³€ν™) β†’ Wav2Vec2 κΈ°λ° λ¨λΈ μ¶”λ΅  β†’ κ²°κ³Ό λ°ν™κΉμ§€μ μ „μ²΄ νμ΄ν”„λΌμΈμ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.

---

## π” ν”„λ΅μ νΈ ν• μ¤„ μ”μ•½

> **λ¨λ°”μΌ/μ›Ή ν΄λΌμ΄μ–ΈνΈμ—μ„ μμ§‘ν• μμ„± λ°μ΄ν„°λ¥Ό μ„λ²„μ—μ„ AI λ¨λΈλ΅ λ¶„μ„ν•μ—¬ μλ£μ  νλ‹¨μ„ λ•λ” λ°±μ—”λ“ μ‹μ¤ν…**

---

## π—οΈ μ „μ²΄ μ•„ν‚¤ν…μ²

```
[ Client (Mobile / Web) ]
          |
          |  multipart/form-data
          v
[ FastAPI Backend ]
          |
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚ Upload / API  β”‚  β† FastAPI Router
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
          |
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚ Audio Handler β”‚  β† νμΌ μ €μ¥ / ν¬λ§· λ³€ν™
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
          |
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚ AI Inference  β”‚  β† Wav2Vec2
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
          |
       JSON Response
```

---

## π“ λ°±μ—”λ“ λ””λ ‰ν„°λ¦¬ κµ¬μ΅°

```
backend/
 β”β”€β”€ main.py                # FastAPI μ—”νΈλ¦¬ ν¬μΈνΈ
 β”β”€β”€ routes/                # API λΌμ°ν„°
 β”‚   β”β”€β”€ upload.py          # μ„Έμ… μƒμ„± λ° νμΌ μ—…λ΅λ“
 β”‚   β””β”€β”€ predict.py         # μμ„± μμΈ΅ API
 β”β”€β”€ services/
 β”‚   β””β”€β”€ session_manager.py # μ‚¬μ©μ μ„Έμ… / νμΌ κ΄€λ¦¬
 β””β”€β”€ model/
     β”β”€β”€ inference.py       # AI λ¨λΈ μ¶”λ΅  λ΅μ§
     β”β”€β”€ model.safetensors  # ν•™μµλ λ¨λΈ κ°€μ¤‘μΉ
     β””β”€β”€ config.json λ“±     # HuggingFace λ¨λΈ μ„¤μ •
```

---

## π”„ ν•µμ‹¬ λ΅μ§ ν”λ΅μ° (Backend Logic Diagram)

```
[Client]
   |
   |  μμ„± νμΌ + μ‚¬μ©μ μ •λ³΄
   v
POST /predict/
   |
   v
[Router]
   |
   v
[νμΌ μ €μ¥]
   |
   v
[3GP β†’ WAV λ³€ν™]
   |
   v
[AI λ¨λΈ μ¶”λ΅ ]
   |
   v
[JSON κ²°κ³Ό λ°ν™]
```

---

## π§ μμ„± μ²λ¦¬ νμ΄ν”„λΌμΈ

1. **μμ„± μ—…λ΅λ“**

   * multipart/form-data ν•μ‹
   * μ‚¬μ©μ μ •λ³΄(name, age, gender)μ™€ ν•¨κ» μ „μ†΅

2. **νμΌ κ΄€λ¦¬**

   * μ‚¬μ©μλ³„ μ„μ‹ λ””λ ‰ν„°λ¦¬ μƒμ„±
   * μ”μ²­ μΆ…λ£ μ‹ μλ™ μ •λ¦¬

3. **ν¬λ§· λ³€ν™**

   * 3GP β†’ WAV
   * PCM 16bit / 16kHz / Mono

4. **AI μ¶”λ΅ **

   * Wav2Vec2ForSequenceClassification
   * softmax ν™•λ¥  κΈ°λ° κ²°κ³Ό λ°ν™

---

## π¤– AI λ¨λΈ μ¶”λ΅  κµ¬μ΅°

* Framework: **PyTorch + HuggingFace Transformers**
* Model: **Wav2Vec2ForSequenceClassification**
* μ…λ ¥: 16kHz mono waveform
* μ¶λ ¥:

```json
{
  "class": 1,
  "probabilities": [0.12, 0.88]
}
```

---

## π“΅ API λ…μ„Έ (μ”μ•½)

### POST `/predict/`

**Request**

* file: μμ„± νμΌ (3gp)
* user_name: string
* user_age: number
* user_gender: string

**Response**

```json
{
  "result": {
    "class": 0,
    "probabilities": [0.73, 0.27]
  }
}
```

---

## π› οΈ μ‹¤ν–‰ λ°©λ²• (Expo κΈ°λ° ν΄λΌμ΄μ–ΈνΈ)

> μ›Ή ν™κ²½(HTTP)μ—μ„μ λ³΄μ• μ μ•½μΌλ΅ μΈν•΄, λ³Έ ν”„λ΅μ νΈλ” **Expo(React Native) κΈ°λ° λ¨λ°”μΌ ν΄λΌμ΄μ–ΈνΈ**λ¥Ό ν†µν•΄ μμ„± μ—…λ΅λ“λ¥Ό κ²€μ¦ν–μµλ‹λ‹¤.
> λ°±μ—”λ“λ” λ¨λ°”μΌ ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°λ™μ„ κΈ°μ¤€μΌλ΅ μ„¤κ³„Β·ν…μ¤νΈλμ—μµλ‹λ‹¤.

### μ‹¤ν–‰ νλ¦„ μ”μ•½

1. Expo μ•±μ—μ„ μμ„± λ…Ήμ μν–‰ (`.3gp` ν¬λ§·)
2. λ…Ήμ μ™„λ£ ν›„ FastAPI μ„λ²„λ΅ multipart/form-data μ—…λ΅λ“
3. λ°±μ—”λ“μ—μ„ μ „μ²λ¦¬ λ° AI μ¶”λ΅  μν–‰ ν›„ JSON κ²°κ³Ό λ°ν™

β€» μ›Ή κΈ°λ° μ‹¤ν–‰μ€ HTTPS ν™κ²½ κµ¬μ„± μ΄ν›„ ν™•μ¥ μμ •

---

## β οΈ νΈλ¬λΈ” μν… (Troubleshooting)

### π” HTTP ν™κ²½μ—μ„μ μμ„± μ—…λ΅λ“ λ¬Έμ 

* μ΄κΈ° μ›Ή ν™κ²½μ—μ„ **HTTP λ³΄μ• μ •μ±…**μΌλ΅ μΈν•΄ μμ„± νμΌ μ—…λ΅λ“κ°€ μ ν•λλ” μ΄μ λ°μƒ
* λΈλΌμ°μ €(Web) κΈ°λ° μ—…λ΅λ“ μ‹ λ§μ΄ν¬/νμΌ μ ‘κ·Ό λ° νμΌ μ „μ†΅μ΄ μ°¨λ‹¨λ¨

#### β”οΈ ν•΄κ²° λ°©λ²•

* **Expo κΈ°λ° λ¨λ°”μΌ ν™κ²½**μΌλ΅ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„
* λ¨λ°”μΌ ν™κ²½μ—μ„λ” μμ„± λ…Ήμ λ° νμΌ μ „μ†΅μ΄ μ•μ •μ μΌλ΅ λ™μ‘
* FastAPI λ°±μ—”λ“μ™€ multipart/form-data λ°©μ‹μΌλ΅ μ—°λ™

#### π”„ ν–¥ν›„ κ°μ„  λ°©ν–¥

* HTTPS κΈ°λ° μ›Ή μ„λΉ„μ¤λ΅ μ „ν™
* μ›Ή/λ¨λ°”μΌ ν΄λΌμ΄μ–ΈνΈ **λ™κΈ°ν™”λ μ—…λ΅λ“ νμ΄ν”„λΌμΈ** κµ¬μ¶•

---

### β οΈ λ¨λ°”μΌ(Android) ν™κ²½μ—μ„μ μμ„± νμΌ ν™•μ¥μ λ¶μΌμΉ λ¬Έμ 

* Expo(Android) ν™κ²½μ—μ„ λ…Ήμλ μμ„± νμΌμ΄ μμƒν• ν™•μ¥μ(`.wav`, `.mp3`)κ°€ μ•„λ‹ **`.3gp` λλ” ν™•μ¥μ μ—†λ” νμΌ**λ΅ μ—…λ΅λ“λλ” ν„μƒ λ°μƒ
* μ΄κΈ° λ°±μ—”λ“ λ΅μ§μ—μ„ ν™•μ¥μ κΈ°λ° νμΌ μ²λ¦¬ λ΅μ§μΌλ΅ μΈν•΄ μ—…λ΅λ“ μ΄ν›„ μ „μ²λ¦¬κ°€ μ •μƒμ μΌλ΅ μν–‰λμ§€ μ•μ

#### μ›μΈ λ¶„μ„

* Android ν”λ«νΌμ—μ„ κΈ°λ³Έ μμ„± λ…Ήμ ν¬λ§·μ΄ `.3gp`λ΅ μ €μ¥λ¨
* νμΌ ν™•μ¥μμ™€ μ‹¤μ  μ½”λ± μ •λ³΄κ°€ ν΄λΌμ΄μ–ΈνΈ ν™κ²½μ— λ”°λΌ μƒμ΄

#### ν•΄κ²° λ°©λ²•

* μ—…λ΅λ“ μ‹ **ν™•μ¥μμ— μμ΅΄ν•μ§€ μ•κ³  ffmpeg κΈ°λ° ν¬λ§· λ³€ν™μ„ κΈ°μ¤€μΌλ΅ μ²λ¦¬**
* `.3gp` ν¬λ§·μ„ ν‘μ¤€ μ…λ ¥μΌλ΅ ν—μ©ν•λ„λ΅ λ°±μ—”λ“ λ΅μ§ μμ •

---

## π€ ν–¥ν›„ κ°μ„  λ°©ν–¥

* **HTTPS κΈ°λ° μ›Ή μ„λΉ„μ¤ μ „ν™**λ¥Ό ν†µν•΄ λΈλΌμ°μ € ν™κ²½μ—μ„λ„ μμ„± μ—…λ΅λ“κ°€ κ°€λ¥ν•λ„λ΅ κ°μ„ 
* μ›Ή/λ¨λ°”μΌ ν΄λΌμ΄μ–ΈνΈ κ°„ **κ³µν†µ μ—…λ΅λ“ νμ΄ν”„λΌμΈ** μ„¤κ³„
* μ—…λ΅λ“ λ‹¨κ³„μ—μ„ μμ„± ν¬λ§· μλ™ μ •κ·ν™”(audio normalization) λ¨λ“ λ¶„λ¦¬
* API λ…μ„Έ(OpenAPI)λ¥Ό ν†µν• ν΄λΌμ΄μ–ΈνΈβ€“μ„λ²„ μΈν„°νμ΄μ¤ λ…ν™•ν™”
